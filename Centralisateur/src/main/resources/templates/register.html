<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Inscription - Banque Premium</title>
    
    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí≥</text></svg>">
</head>
<body>
    <!-- Header -->
    <div th:replace="~{base :: header}"></div>

    <!-- Main Content -->
    <main class="auth-container">
        <div class="container-sm">
            <div class="auth-card">
                <div class="auth-card__header">
                    <h1 class="auth-card__title">Inscription</h1>
                    <p class="auth-card__subtitle">Rejoignez Banque Premium et profitez de nos services exclusifs</p>
                </div>

                <!-- Messages d'alerte -->
                <div th:if="${errorMessage}" class="alert alert-danger">
                    <span th:text="${errorMessage}">Message d'erreur</span>
                </div>

                <!-- Formulaire d'inscription -->
                <form th:action="@{/register}" method="post" class="register-form">
                    <div class="form-group">
                        <label for="prenom" class="form-label">Pr√©nom *</label>
                        <input 
                            type="text" 
                            id="prenom" 
                            name="prenom" 
                            class="form-control" 
                            placeholder="Jean"
                            th:value="${prenom}"
                            required 
                            autocomplete="given-name"
                        >
                    </div>

                    <div class="form-group">
                        <label for="nom" class="form-label">Nom de famille *</label>
                        <input 
                            type="text" 
                            id="nom" 
                            name="nom" 
                            class="form-control" 
                            placeholder="Dupont"
                            th:value="${nom}"
                            required 
                            autocomplete="family-name"
                        >
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">Adresse email *</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            class="form-control" 
                            placeholder="jean.dupont@exemple.com"
                            th:value="${email}"
                            required 
                            autocomplete="email"
                        >
                    </div>

                    <div class="form-group">
                        <label for="telephone" class="form-label">Num√©ro de t√©l√©phone *</label>
                        <input 
                            type="tel" 
                            id="telephone" 
                            name="telephone" 
                            class="form-control" 
                            placeholder="+261 34 12 345 67"
                            th:value="${telephone}"
                            required 
                            autocomplete="tel"
                        >
                    </div>

                    <div class="form-group">
                        <label for="dateNaissance" class="form-label">Date de naissance *</label>
                        <input 
                            type="date" 
                            id="dateNaissance" 
                            name="dateNaissance" 
                            class="form-control" 
                            th:value="${dateNaissance}"
                            required 
                            autocomplete="bday"
                        >
                    </div>

                    <div class="form-group">
                        <label for="numCin" class="form-label">Num√©ro CIN *</label>
                        <input 
                            type="text" 
                            id="numCin" 
                            name="numCin" 
                            class="form-control" 
                            placeholder="101234567890"
                            th:value="${numCin}"
                            required 
                            maxlength="20"
                        >
                        <small class="text-muted">Carte d'identit√© nationale</small>
                    </div>

                    <div class="form-group">
                        <label for="adresse" class="form-label">Adresse</label>
                        <input 
                            type="text" 
                            id="adresse" 
                            name="adresse" 
                            class="form-control" 
                            placeholder="12 Rue de la Paix"
                            th:value="${adresse}"
                            autocomplete="street-address"
                        >
                    </div>

                    <div class="form-group">
                        <label for="profession" class="form-label">Profession</label>
                        <input 
                            type="text" 
                            id="profession" 
                            name="profession" 
                            class="form-control" 
                            placeholder="Ing√©nieur, M√©decin, etc."
                            th:value="${profession}"
                            autocomplete="organization-title"
                        >
                    </div>

                    <div class="form-group">
                        <label for="situationFamiliale" class="form-label">Situation familiale</label>
                        <select 
                            id="situationFamiliale" 
                            name="situationFamiliale" 
                            class="form-control form-select"
                        >
                            <option value="">Choisissez votre situation</option>
                            <option value="CELIBATAIRE" th:selected="${situationFamiliale == 'CELIBATAIRE'}">C√©libataire</option>
                            <option value="MARIE" th:selected="${situationFamiliale == 'MARIE'}">Mari√©(e)</option>
                            <option value="DIVORCE" th:selected="${situationFamiliale == 'DIVORCE'}">Divorc√©(e)</option>
                            <option value="VEUF" th:selected="${situationFamiliale == 'VEUF'}">Veuf/Veuve</option>
                            <option value="UNION_LIBRE" th:selected="${situationFamiliale == 'UNION_LIBRE'}">Union libre</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="motDePasse" class="form-label">Mot de passe *</label>
                        <input 
                            type="password" 
                            id="motDePasse" 
                            name="motDePasse" 
                            class="form-control" 
                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                            required 
                            autocomplete="new-password"
                            minlength="8"
                        >
                        <small class="text-muted">Au moins 8 caract√®res</small>
                    </div>

                    <div class="form-group">
                        <label for="confirmerMotDePasse" class="form-label">Confirmer le mot de passe *</label>
                        <input 
                            type="password" 
                            id="confirmerMotDePasse" 
                            name="confirmerMotDePasse" 
                            class="form-control" 
                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                            required 
                            autocomplete="new-password"
                            minlength="8"
                        >
                    </div>

                    <!-- Conditions d'utilisation -->
                    <div class="form-group">
                        <label class="d-flex align-items-center">
                            <input type="checkbox" required style="margin-right: 8px;">
                            <span>J'accepte les <a href="#" class="text-gold">conditions d'utilisation</a> et la <a href="#" class="text-gold">politique de confidentialit√©</a></span>
                        </label>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-gold btn-block btn-lg">
                            ‚ú® Cr√©er mon compte
                        </button>
                    </div>
                </form>

                <!-- Actions suppl√©mentaires -->
                <div class="text-center mt-4">
                    <p class="text-muted">D√©j√† un compte ?</p>
                    <a th:href="@{/login}" class="btn btn-outline">
                        üîê Se connecter
                    </a>
                </div>

                <!-- Avantages -->
                <div class="mt-4" style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                    <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem;">‚ú® Avantages Banque Premium</h3>
                    <ul style="margin: 0; padding-left: 1.5rem; color: #666;">
                        <li>Comptes sans frais de tenue</li>
                        <li>Virements instantan√©s gratuits</li>
                        <li>Support client 24h/7j</li>
                        <li>Interface moderne et s√©curis√©e</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div th:replace="~{base :: footer}"></div>

    <!-- Scripts -->
    <script th:replace="~{base :: scripts}"></script>
    
    <!-- Script sp√©cifique √† la page d'inscription -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('.register-form');
            const motDePasse = document.getElementById('motDePasse');
            const confirmerMotDePasse = document.getElementById('confirmerMotDePasse');
            
            // Validation du mot de passe
            function validatePasswords() {
                if (motDePasse.value !== confirmerMotDePasse.value) {
                    confirmerMotDePasse.setCustomValidity('Les mots de passe ne correspondent pas');
                    confirmerMotDePasse.style.borderColor = '#dc3545';
                } else {
                    confirmerMotDePasse.setCustomValidity('');
                    confirmerMotDePasse.style.borderColor = '#28a745';
                }
            }
            
            motDePasse.addEventListener('input', validatePasswords);
            confirmerMotDePasse.addEventListener('input', validatePasswords);
            
            // Animation du formulaire
            form.addEventListener('submit', function(e) {
                const submitBtn = form.querySelector('button[type="submit"]');
                
                // V√©rifier que les mots de passe correspondent
                if (motDePasse.value !== confirmerMotDePasse.value) {
                    e.preventDefault();
                    alert('Les mots de passe ne correspondent pas');
                    return;
                }
                
                submitBtn.innerHTML = '‚è≥ Cr√©ation en cours...';
                submitBtn.disabled = true;
            });
            
            // Focus automatique
            const prenomField = document.getElementById('prenom');
            if (prenomField && !prenomField.value) {
                prenomField.focus();
            }
            
            // Validation des champs en temps r√©el
            const requiredInputs = form.querySelectorAll('input[required], select[required]');
            requiredInputs.forEach(input => {
                input.addEventListener('blur', function() {
                    if (!this.value.trim()) {
                        this.style.borderColor = '#dc3545';
                    } else if (this.type === 'email') {
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        this.style.borderColor = emailRegex.test(this.value) ? '#28a745' : '#dc3545';
                    } else {
                        this.style.borderColor = '#28a745';
                    }
                });
            });
            
            // Validation du t√©l√©phone
            const telephone = document.getElementById('telephone');
            telephone.addEventListener('input', function() {
                // Permettre seulement les chiffres, espaces, +, -, (, )
                this.value = this.value.replace(/[^0-9+\-\s()]/g, '');
            });
        });
    </script>
</body>
</html>