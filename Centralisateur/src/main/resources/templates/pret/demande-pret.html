<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Demande de Pr√™t - Banque Premium</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body th:replace="~{base :: layout(~{::title}, ~{::section})}">
<section>
    <div class="container">
        <!-- Messages -->
        <div th:if="${errorMessage != null}" class="alert alert-danger">
            <span th:text="${errorMessage}">Message d'erreur</span>
        </div>

        <!-- En-t√™te -->
        <div class="page-header">
            <h1 class="page-title">üìù Demande de Pr√™t</h1>
            <p class="page-subtitle">
                Remplissez le formulaire pour soumettre votre demande de pr√™t
            </p>
        </div>

            <!-- Formulaire de demande -->
            <div class="card">
                <div class="card__header">
                    <h2 class="card__title">Informations du pr√™t</h2>
                </div>
                <div class="card__content">
                    <form th:action="@{/pret/demande}" method="post" class="form">
                        <!-- Type de pr√™t -->
                        <div class="form-group">
                            <label for="idTypePret" class="form-label">Type de pr√™t *</label>
                            <select id="idTypePret" name="idTypePret" class="form-input" required 
                                    th:value="${idTypePret != null ? idTypePret : param.idTypePret}">
                                <option value="">-- S√©lectionnez un type de pr√™t --</option>
                                <option th:each="type : ${typesPrets}" 
                                        th:value="${type.idTypePret}" 
                                        th:text="${type.libelle} + ' (' + ${type.tauxInteretAnnuel} + '% par an)'"
                                        th:selected="${type.idTypePret == (idTypePret != null ? idTypePret : param.idTypePret)}">
                                    Pr√™t Personnel
                                </option>
                            </select>
                        </div>

                        <!-- Montant -->
                        <div class="form-group">
                            <label for="montant" class="form-label">Montant du pr√™t (‚Ç¨) *</label>
                            <input type="number" id="montant" name="montant" class="form-input" 
                                   min="1000" max="1000000" step="100" required
                                   th:value="${montant != null ? montant : param.montant}"
                                   placeholder="Ex: 50000">
                            <small class="form-help">Montant minimum: 1 000 ‚Ç¨</small>
                        </div>

                        <!-- Dur√©e -->
                        <div class="form-group">
                            <label for="dureeMois" class="form-label">Dur√©e (en mois) *</label>
                            <input type="number" id="dureeMois" name="dureeMois" class="form-input" 
                                   min="12" max="360" step="1" required
                                   th:value="${dureeMois != null ? dureeMois : param.dureeMois}"
                                   placeholder="Ex: 120">
                            <small class="form-help">De 12 √† 360 mois</small>
                        </div>

                        <!-- Informations -->
                        <div class="alert alert-info">
                            <strong>‚ÑπÔ∏è Bon √† savoir:</strong>
                            <ul style="margin: 0.5rem 0 0 1.5rem;">
                                <li>Votre demande sera √©tudi√©e par nos services</li>
                                <li>Vous recevrez une r√©ponse sous 48-72h ouvr√©es</li>
                                <li>Les fonds seront vers√©s apr√®s approbation</li>
                                <li><strong>Le remboursement d√©butera automatiquement 1 mois apr√®s l'approbation</strong></li>
                            </ul>
                        </div>

                        <!-- Boutons -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-gold">
                                üìù Soumettre ma demande
                            </button>
                            <a th:href="@{/pret/simulation}" class="btn btn-outline">
                                üßÆ Faire une simulation
                            </a>
                            <a th:href="@{/dashboard}" class="btn btn-outline">Annuler</a>
                        </div>
                    </form>
            </div>
        </div>
    </div>
</section>
</body>
</html>