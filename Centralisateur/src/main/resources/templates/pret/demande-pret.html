<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Demande de PrÃªt - Banque Premium</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body th:replace="~{base :: layout(~{::title}, ~{::section})}">
<section>
    <div class="container">
        <!-- Messages -->
        <div th:if="${errorMessage != null}" class="alert alert-danger">
            <span th:text="${errorMessage}">Message d'erreur</span>
        </div>

        <!-- En-tÃªte -->
        <div class="page-header">
            <h1 class="page-title">ğŸ“ Demande de PrÃªt</h1>
            <p class="page-subtitle">
                Remplissez le formulaire pour soumettre votre demande de prÃªt
            </p>
        </div>

            <!-- Formulaire de demande -->
            <div class="card">
                <div class="card__header">
                    <h2 class="card__title">Informations du prÃªt</h2>
                </div>
                <div class="card__content">
                    <form th:action="@{/pret/demande}" method="post" class="form">
                        <!-- Type de prÃªt -->
                        <div class="form-group">
                            <label for="idTypePret" class="form-label">Type de prÃªt *</label>
                            <select id="idTypePret" name="idTypePret" class="form-input" required 
                                    th:value="${idTypePret != null ? idTypePret : param.idTypePret}">
                                <option value="">-- SÃ©lectionnez un type de prÃªt --</option>
                                <option th:each="type : ${typesPrets}" 
                                        th:value="${type.idTypePret}" 
                                        th:text="${type.libelle} + ' (' + ${type.tauxInteretAnnuel} + '% par an)'"
                                        th:selected="${type.idTypePret == (idTypePret != null ? idTypePret : param.idTypePret)}">
                                    PrÃªt Personnel
                                </option>
                            </select>
                        </div>

                        <!-- Montant -->
                        <div class="form-group">
                            <label for="montant" class="form-label">Montant du prÃªt (â‚¬) *</label>
                            <input type="number" id="montant" name="montant" class="form-input" 
                                   min="1000" max="1000000" step="100" required
                                   th:value="${montant != null ? montant : param.montant}"
                                   placeholder="Ex: 50000">
                            <small class="form-help">Montant minimum: 1 000 â‚¬</small>
                        </div>

                        <!-- DurÃ©e -->
                        <div class="form-group">
                            <label for="dureeMois" class="form-label">DurÃ©e (en mois) *</label>
                            <input type="number" id="dureeMois" name="dureeMois" class="form-input" 
                                   min="12" max="360" step="1" required
                                   th:value="${dureeMois != null ? dureeMois : param.dureeMois}"
                                   placeholder="Ex: 120">
                            <small class="form-help">De 12 Ã  360 mois</small>
                        </div>

                        <!-- Date de dÃ©but de remboursement -->
                        <div class="form-group">
                            <label for="dateDebutRemboursement" class="form-label">Date de dÃ©but de remboursement *</label>
                            <input type="date" id="dateDebutRemboursement" name="dateDebutRemboursement" 
                                   class="form-input" required
                                   th:value="${dateDebutRemboursement}"
                                   th:min="${#temporals.format(#temporals.createToday(), 'yyyy-MM-dd')}">
                            <small class="form-help">La date doit Ãªtre dans le futur</small>
                        </div>

                        <!-- Informations -->
                        <div class="alert alert-info">
                            <strong>â„¹ï¸ Bon Ã  savoir:</strong>
                            <ul style="margin: 0.5rem 0 0 1.5rem;">
                                <li>Votre demande sera Ã©tudiÃ©e par nos services</li>
                                <li>Vous recevrez une rÃ©ponse sous 48-72h ouvrÃ©es</li>
                                <li>Les fonds seront versÃ©s aprÃ¨s approbation</li>
                            </ul>
                        </div>

                        <!-- Boutons -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-gold">
                                ğŸ“ Soumettre ma demande
                            </button>
                            <a th:href="@{/pret/simulation}" class="btn btn-outline">
                                ğŸ§® Faire une simulation
                            </a>
                            <a th:href="@{/dashboard}" class="btn btn-outline">Annuler</a>
                        </div>
                    </form>
            </div>
        </div>
    </div>
</section>
</body>
</html>