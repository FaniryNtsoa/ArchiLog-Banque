<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">Consulter Solde - Banque Premium</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body th:replace="~{base :: layout(~{::title}, ~{::section})}">
<section>
    <div class="page-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">üìä Consulter vos Soldes</h1>
                <p class="page-subtitle">Visualisez l'√©tat de tous vos comptes</p>
            </div>

            <!-- Vue d'ensemble -->
            <div class="overview-cards" th:if="${comptes != null and !comptes.isEmpty()}">
                <div class="overview-card">
                    <div class="overview-card__icon">üí∞</div>
                    <div class="overview-card__content">
                        <h3>Nombre de Comptes</h3>
                        <div class="amount-large" th:text="${#lists.size(comptes)}">2</div>
                    </div>
                </div>
            </div>

            <!-- D√©tail des comptes -->
            <div class="accounts-section">
                <h2 class="section-title">D√©tail de vos comptes</h2>
                
                <div class="accounts-grid" th:if="${comptes != null and !comptes.isEmpty()}">
                    <div th:each="compte : ${comptes}" class="account-card">
                        <div class="account-card__header">
                            <div class="account-info">
                                <h3 class="account-number" th:text="${compte.numeroCompte}">123456789</h3>
                                <p class="account-label" th:text="${compte.libelleCompte != null ? compte.libelleCompte : 'Compte Courant'}">Compte Courant Principal</p>
                                <span class="account-type" th:text="${compte.typeCompte != null ? compte.typeCompte : 'Courant'}">Courant</span>
                            </div>
                            <div class="account-status">
                                <span class="status-badge" 
                                      th:classappend="${compte.statut == 'ACTIF'} ? 'status--active' : 'status--inactive'"
                                      th:text="${compte.statut}">
                                    ACTIF
                                </span>
                            </div>
                        </div>

                        <div class="account-card__body">
                            <!-- Solde principal -->
                            <div class="balance-section">
                                <div class="balance-item balance-item--main">
                                    <span class="balance-label">Solde actuel</span>
                                    <span class="balance-amount" 
                                          th:text="${#numbers.formatCurrency(compte.solde)}"
                                          th:classappend="${compte.solde < 0} ? 'amount--negative' : 'amount--positive'">
                                        1 250,00 ‚Ç¨
                                    </span>
                                </div>

                                <!-- D√©couvert autoris√© -->
                                <div class="balance-item" th:if="${compte.decouvertAutorise != null}">
                                    <span class="balance-label">D√©couvert autoris√©</span>
                                    <span class="balance-amount" th:text="${#numbers.formatCurrency(compte.decouvertAutorise)}">
                                        500,00 ‚Ç¨
                                    </span>
                                </div>
                            </div>

                            <!-- Indicateur de d√©couvert -->
                            <div th:if="${compte.solde < 0}" class="alert alert--warning">
                                <i class="alert__icon">‚ö†Ô∏è</i>
                                <span>Compte en situation de d√©couvert</span>
                            </div>

                            <!-- Actions rapides -->
                            <div class="account-actions">
                                <a th:href="@{/depot}" 
                                   class="btn btn--small btn--success">
                                    <i class="btn__icon">üíµ</i>
                                    D√©p√¥t
                                </a>
                                <a th:href="@{/retrait}" 
                                   class="btn btn--small btn--warning">
                                    <i class="btn__icon">üí∏</i>
                                    Retrait
                                </a>
                                <a th:href="@{/historique(numeroCompte=${compte.numeroCompte})}" 
                                   class="btn btn--small btn--info">
                                    <i class="btn__icon">üìã</i>
                                    Historique
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Message si pas de comptes -->
                <div th:if="${comptes == null or comptes.isEmpty()}" class="empty-state">
                    <div class="empty-state__icon">üè¶</div>
                    <h3 class="empty-state__title">Aucun compte trouv√©</h3>
                    <p class="empty-state__text">
                        Vous n'avez actuellement aucun compte bancaire.
                    </p>
                    <a th:href="@{/nouveau-compte}" class="btn btn--primary">
                        <i class="btn__icon">üè¶</i>
                        Cr√©er votre premier compte
                    </a>
                </div>
            </div>

            <!-- Actions g√©n√©rales -->
            <div class="page-actions">
                <a th:href="@{/virement}" class="btn btn--primary">
                    <i class="btn__icon">üîÑ</i>
                    Effectuer un virement
                </a>
                <a th:href="@{/nouveau-compte}" class="btn btn--secondary">
                    <i class="btn__icon">üè¶</i>
                    Ouvrir un nouveau compte
                </a>
                <a th:href="@{/dashboard}" class="btn btn--outline">
                    <i class="btn__icon">üè†</i>
                    Retour au tableau de bord
                </a>
            </div>
        </div>
    </div>
</section>
</body>
</html>